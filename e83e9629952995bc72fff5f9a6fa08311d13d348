{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "7361e764_713e79d5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 29356
      },
      "writtenOn": "2023-02-17T09:15:17Z",
      "side": 1,
      "message": "My device always boots in 60 Hz without these properties, rendering the smooth display switch unusable.",
      "revId": "e83e9629952995bc72fff5f9a6fa08311d13d348",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1883eb1f_e15778df",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 14962
      },
      "writtenOn": "2023-02-17T10:38:02Z",
      "side": 1,
      "message": "Where do these values come from?\nWhy use product.prop instead of system.prop or vendor.prop?",
      "revId": "e83e9629952995bc72fff5f9a6fa08311d13d348",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0c98a6ed_cdf4f61c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 29356
      },
      "writtenOn": "2023-02-17T11:27:55Z",
      "side": 1,
      "message": "From https://source.android.com/docs/core/graphics/multiple-refresh-rate#platform-refresh-rate , stock ROM doesn\u0027t use AOSP smooth display control.\n\nUsing setting for Pixel devices ( https://cs.android.com/android/platform/superproject/+/master:device/google/gs201/factory_common.mk;l\u003d51?q\u003dset_touch_timer_ms ) will result in noticeable flickering, so I make it wait longer before switching back to 60 Hz.\n\nThese props are not used to declare hardware capabilities, it\u0027s fine to use either system.prop or product.prop. I have no particular preference but still need to add one since they\u0027re not suitable for vendor.prop.\n\nAlternatively, we can abuse config_highDisplayBrightnessThresholdsOfFixedRefreshRate to enforce 120 Hz mode. i.e. use 120 Hz when display brightness \u003e\u003d 0 \u0026\u0026 ambient brightness \u003e\u003d 0",
      "parentUuid": "1883eb1f_e15778df",
      "revId": "e83e9629952995bc72fff5f9a6fa08311d13d348",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "87bff275_5d3aa88d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 14962
      },
      "writtenOn": "2023-02-18T01:00:09Z",
      "side": 1,
      "message": "Thank you. I understood.\n\nI have tested with the following values and they worked fine:\nro.surface_flinger.set_idle_timer_ms\u003d4000\nro.surface_flinger.set_touch_timer_ms\u003d4000\nro.surface_flinger.set_display_power_timer_ms\u003d1000\nro.surface_flinger.use_content_detection_for_refresh_rate\u003dtrue\nThese values come from here:\nhttps://github.com/AOSPA/android_device_xiaomi_alioth/blob/topaz/device.mk\n\nWhat do you think of these values? Are these values okay?",
      "parentUuid": "0c98a6ed_cdf4f61c",
      "revId": "e83e9629952995bc72fff5f9a6fa08311d13d348",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "39423444_ce0308b9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 29356
      },
      "writtenOn": "2023-02-18T02:01:20Z",
      "side": 1,
      "message": "They also have a config_defaultRefreshRateInZone setting but no config_brightnessThresholdsOfPeakRefreshRate, not sure how it will behave.\n\nWe may also need overlay config_brightnessThresholdsOfPeakRefreshRate and config_ambientThresholdsOfPeakRefreshRate to block refresh rate switching in low brightness, like https://cs.android.com/android/platform/superproject/+/master:device/google/raviole/raven/overlay/frameworks/base/core/res/res/values/config.xml;l\u003d90?q\u003dconfig_defaultRefreshRateInZone",
      "parentUuid": "87bff275_5d3aa88d",
      "revId": "e83e9629952995bc72fff5f9a6fa08311d13d348",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "61757550_3a3cbbf2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 14962
      },
      "writtenOn": "2023-02-18T04:51:10Z",
      "side": 1,
      "message": "That should be another patch.\nIf you are OK with the updated values, I will merge.",
      "parentUuid": "39423444_ce0308b9",
      "revId": "e83e9629952995bc72fff5f9a6fa08311d13d348",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4501f586_eacadf80",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 14962
      },
      "writtenOn": "2023-02-18T06:04:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "61757550_3a3cbbf2",
      "revId": "e83e9629952995bc72fff5f9a6fa08311d13d348",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    }
  ]
}